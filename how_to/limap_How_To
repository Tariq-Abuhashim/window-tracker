$ usecuda11_4

$ conda create -n limap python=3.9 cudatoolkit=11.4
$ conda activate limap 

#install torch 
$ conda install astunparse numpy ninja pyyaml mkl mkl-include setuptools cmake cffi typing_extensions future six requests dataclasses
$ git clone -b v1.12.0 https://github.com/pytorch/pytorch
$ cd pytorch
$ export CMAKE_PREFIX_PATH=${CONDA_PREFIX:-"$(dirname $(which conda))/../"}
$ python setup.py install

#install torchvision
$ git clone -b v0.13.0 https://github.com/pytorch/vision.git
$ cd vision
$ python setup.py install

# OpenCV needs to be compiled also with cuda 11.4

$ git clone --recursive https://github.com/vlarsson/PoseLib.git
$ cd PoseLib
$ mkdir build && cd build
$ cmake ..
$ sudo make install -j8

$ git clone https://github.com/cvg/limap.git
$ cd limap
$ git submodule update --init --recursive
$ cd third-party/TP-LSD/tp_lsd/modeling
$ rm -r DCNv2/
$ git clone https://github.com/lucasjinreal/DCNv2_latest.git DCNv2
$ cd ../../../../
$ python -m pip install -r requirements.txt
$ cd build && cmake ..
$ make -j8
$ python -m pip install -Ive . 


##### issues
## wrong Hierarchical-Localization
$ cd thirdparty/Hierarchical-Localization/
$ git checkout -b v1.4
$ git submodule update --init --recursive
## wrong GlueStick


##### How to run limap
$ python runners/colmap_triangulation.py -c /home/mrt/dev/window_tracker/limap/cfgs/triangulation/default_fast.yaml -a /home/mrt/dev/window_tracker/data/DJI/ --output_dir /home/mrt/dev/window_tracker/data/DJI/

##### How to view the lines
$ python visualize_3d_lines.py --input_dir /home/mrt/dev/window_tracker/data/DJI/finaltracks/
